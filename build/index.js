/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";var e={20:(e,t,n)=>{var s=n(594),i=Symbol.for("react.element"),a=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),r=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var s,l={},d=null,c=null;for(s in void 0!==n&&(d=""+n),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,s)&&!o.hasOwnProperty(s)&&(l[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===l[s]&&(l[s]=t[s]);return{$$typeof:i,type:e,key:d,ref:c,props:l,_owner:r.current}}t.jsx=l,t.jsxs=l},594:e=>{e.exports=React},848:(e,t,n)=>{e.exports=n(20)}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,n),a.exports}n(594);const s=wp.element;var i=n(848);const a=({eventRegistration:e,emitResponse:t,billing:n})=>{const{cartTotal:a,currency:r}=n,o=(0,s.useRef)(null),{onPaymentSetup:l}=e;return(0,s.useEffect)((()=>{if(!window.shift4Initialised){const e=()=>{"function"==typeof initShift4&&(initShift4({paymentMethodDataRef:o}),window.shift4Initialised=!0,window.shift4UpdatedCheckout())};window.shift4JsLoaded?e():document.addEventListener("shift4JsLoaded",e)}window.shift4UpdatedCheckout();const e=l((async()=>(window.clearError(),await window.shift4PaymentFormSubmit({amount:a.value,currency:r.code}),o.current?{type:t.responseTypes.SUCCESS,meta:{paymentMethodData:{...o.current}}}:{type:t.responseTypes.ERROR})));return()=>{e()}}),[t.responseTypes.ERROR,t.responseTypes.SUCCESS,l]),(0,i.jsxs)("div",{id:"shift4-payment-form",children:[(0,i.jsxs)("div",{className:"shift4-payment-field",children:[(0,i.jsx)("label",{className:"shift4-payment-number-label",children:"Card number"}),(0,i.jsx)("div",{className:"shift4-payment-input shift4-payment-number-input","data-shift4":"number"})]}),(0,i.jsxs)("div",{className:"shift4-payment-fields",children:[(0,i.jsxs)("div",{className:"shift4-payment-field",children:[(0,i.jsx)("label",{className:"shift4-payment-expiry-label",children:"Expiration"}),(0,i.jsx)("div",{className:"shift4-payment-input shift4-payment-expiry-input","data-shift4":"expiry"})]}),(0,i.jsxs)("div",{className:"shift4-payment-field",children:[(0,i.jsx)("label",{className:"shift4-payment-cvv-label",children:"Cvv"}),(0,i.jsx)("div",{className:"shift4-payment-input shift4-payment-cvv-input","data-shift4":"cvc"})]})]})]})},r=({onClick:e,onClose:t,onSubmit:n,billing:a,setExpressPaymentError:r})=>{const o=(0,s.useRef)(null),l=(0,s.useRef)(null),{cartTotal:d,currency:c}=a,p=(0,s.useRef)(null);(0,s.useEffect)((()=>{if(!window.shift4Initialised){const e=()=>{"function"==typeof initShift4&&(initShift4({paymentMethodDataRef:p}),window.shift4Initialised=!0)};window.shift4JsLoaded?e():document.addEventListener("shift4JsLoaded",e)}const e=l.current;return e&&e.addEventListener("click",f),()=>{e&&e.removeEventListener("click",f)}}),[]);const f=async()=>{e();try{const e=await window.shift4PayWithApplePay({value:(d.value/Math.pow(10,c.minorUnit)).toFixed(c.minorUnit),currency:c.code});o.current&&(o.current.value=JSON.stringify(e)),n()}catch(e){r(e),t()}};return(0,i.jsxs)("div",{children:[(0,i.jsx)("apple-pay-button",{id:"apple-pay-submit-button",buttonstyle:"black",type:"buy",locale:"en-US",class:"w-full",lang:"en-US",ref:l}),(0,i.jsx)("input",{type:"hidden",name:"shift4_applepay_token",ref:o})]})},{registerPaymentMethod:o}=window.wc.wcBlocksRegistry,{registerExpressPaymentMethod:l}=window.wc.wcBlocksRegistry,{cardTitle:d,savedCardsEnabled:c}=window.shift4Config;l({name:"shift4_applepay",label:"Apple Pay (Shift4)",edit:(0,i.jsx)("p",{children:"Apple Pay (Shift4)"}),content:(0,i.jsx)(r,{}),canMakePayment:()=>!(!window.ApplePaySession||!window.ApplePaySession.canMakePayments())}),o({name:"shift4_card",label:d,content:(0,i.jsx)(a,{}),edit:(0,i.jsx)("p",{children:"Credit Card (Shift4)'"}),canMakePayment:()=>!0,ariaLabel:"Shift4 Credit Card payment method",supports:{features:["products"],showSavedCards:"yes"===c,showSaveOption:"yes"===c}})})();